<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <button onclick="getimgID()">Get IMG</button>
        <div id="gallery" class="gallery"></div>
</body>
<script type="text/javascript">
    //var img_Url ='https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=ca370d51a054836007519a00ff4ce59e&photo_id=53608779187&format=json&nojsoncallback=1';
    var img_listUrl='https://api.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=ca370d51a054836007519a00ff4ce59e&per_page=10&format=json&nojsoncallback=1';
    //var dataUrl = 'https://api.unsplash.com/photos?client_id=812193ef71ca946e361ed541979a0cfd91e9419a19235fd05f51ea14233f020a&per_page=30';
    
    function getimgID(){
        var xhr = new XMLHttpRequest();
        xhr.open('GET', img_listUrl, true);
        xhr.send();
        xhr.onload = function(){
            if(xhr.status == 200){
                var listID = JSON.parse(this.responseText);
                //console.log(listID);
                getlistID(listID);
                //console.log("hello world");
            }
        }
    }
    function getlistID(listID){
                    
                    listID.photos.photo.forEach(function(item){
                        var imgID = item.id;
                        
                        console.log(imgID);
                        console.log("hello world???");
                        var img_Url ='https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=ca370d51a054836007519a00ff4ce59e&photo_id='+imgID+'&format=json&nojsoncallback=1';
                        addimgidurl(img_Url);
                        //getimg(img_Url);
                    
                    });
                }
    function addimgidurl(img_Url){
        var xhr = new XMLHttpRequest();
        xhr.open('GET', img_Url, true);
        xhr.send();
        xhr.onload = function(){
            if(xhr.status == 200){
                var data = JSON.parse(this.responseText);
                var dataset = data.sizes.size[3].source;
                    
                var gal = document.getElementById("gallery");
                var img = document.createElement("img");
                img.setAttribute("src", dataset);
                gal.appendChild(img);
                
            }
        }
    }
    


    function getimg(img_Url){
        var xhr = new XMLHttpRequest();
        xhr.open('GET', img_Url, true);
        xhr.send();
        xhr.onload = function(){
            if(xhr.status == 200){
                var data = JSON.parse(this.responseText);
                console.log(data);
                //add_new_img(data);
                //addimgidurl(data);
                //console.log("hello world");
            }
        }

    }
    function add_new_img(dataset){
        var gal = document.getElementById("gallery");
        //console.log(dataset);
        
        dataset.sizes.size.forEach(function(item){
            var img = document.createElement("img");
            img.setAttribute("src", item.source);
            
            //img.setAttribute('src', item.urls.regular);
            gal.appendChild(img);
        });
    }
</script>
<style>
    .gallery {
--g: 6px; /* the gap */
display: grid;
width: 1200px; /* the size */
aspect-ratio: 1;
grid: auto-flow 1fr/repeat(3,1fr);
gap: var(--g);
}
.gallery img {
width: 100%;
height: 100%;
object-fit: cover;
filter: grayscale();
cursor: pointer;
transition: .5s
}
.gallery img:hover {
filter: grayscale(0);
}
.gallery img:nth-child(2) {
grid-area: 1/2/span 2/span 2;
clip-path: polygon(0 0,100% 0,100% 100%,calc(50% + var(--g)/4) 100%,0 calc(50% - var(--g)/4))
}
.gallery img:nth-child(3) {
grid-area: 2/1/span 2/span 2;
clip-path: polygon(0 0,calc(50% - var(--g)/4) 0,100% calc(50% + var(--g)/4),100% 100%,0 100%);
}
</style>
</html>
